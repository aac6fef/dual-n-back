# Dual N-Back 应用开发计划

本项目旨在使用 Tauri 框架开发一个跨平台的 Dual N-Back 桌面应用。

## 第一阶段：项目初始化与核心逻辑

1.  **环境搭建**:
    *   安装 Rust 语言环境。
    *   安装 Node.js 和 npm/yarn/pnpm。
    *   安装 Tauri CLI。
    *   验证环境配置是否成功。

2.  **项目创建**:
    *   使用 `cargo tauri init` 命令创建新的 Tauri 项目。
    *   选择前端框架（建议使用 React 或 Vue）。

3.  **核心游戏逻辑 (Rust后端)**:
    *   定义游戏状态结构体 (GameState)。
    *   实现 Dual N-Back 核心算法，包括：
        *   随机生成视觉（位置）和听觉（字母）刺激。
        *   记录历史刺激序列。
        *   判断用户输入是否匹配 N-back 前的刺激。
        *   更新游戏得分和等级。

## 第二阶段：前端界面开发

1.  **UI/UX 设计**:
    *   设计主游戏界面、设置页面、历史记录页面。
    *   确定应用的整体视觉风格。

2.  **界面实现**:
    *   **游戏主界面**:
        *   创建一个 3x3 (或可配置) 的网格用于显示视觉刺激。
        *   实现声音播放功能用于听觉刺激。
        *   添加按钮供用户输入（位置匹配/声音匹配）。
    *   **设置页面**:
        *   允许用户调整 N-back 的级别 (N=1, 2, 3...)。
        *   允许用户调整刺激呈现的速度。
    *   **结果/统计页面**:
        *   显示单次游戏的分数。
        *   展示用户的历史表现和进步曲线。

## 第三阶段：前后端集成

1.  **Tauri 命令 (Commands)**:
    *   在 Rust 后端定义 Tauri `command`，用于暴露游戏逻辑给前端。
        *   `start_game(n_level: u32, speed: u32)`
        *   `submit_user_input(position_match: bool, audio_match: bool)`
        *   `get_game_state()` -> `GameState`
    *   在前端使用 Tauri API (`invoke`) 调用这些命令。

2.  **状态同步**:
    *   使用 Tauri 的事件系统 (Events) 将后端的游戏状态变化实时推送给前端。
    *   例如，后端可以每秒发送一个 `game-tick` 事件，携带当前的刺激信息，前端监听此事件并更新UI。

## 第四阶段：功能完善与优化

1.  **数据持久化**:
    *   使用 `tauri-plugin-sql` 或 `sled` 等库在本地存储用户的游戏历史和设置。

2.  **音效与动画**:
    *   为正确的匹配和错误的匹配添加音效反馈。
    *   为UI元素添加流畅的过渡动画，提升用户体验。

3.  **国际化**:
    *   支持多语言（例如，中文和英文）。

## 第五阶段：测试与打包

1.  **测试**:
    *   为 Rust 核心逻辑编写单元测试。
    *   进行前后端集成测试，确保 `command` 和 `event` 工作正常。
    *   在目标平台（macOS, Windows, Linux）上进行手动测试。

2.  **构建与打包**:
    *   使用 `cargo tauri build` 命令为不同平台构建应用安装包。
    *   创建应用图标。
    *   编写发布说明。
